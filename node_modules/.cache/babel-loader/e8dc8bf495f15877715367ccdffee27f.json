{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = require(\"react\");\n\nvar _lodash = require(\"lodash\");\n\nvar _useDataManager2 = _interopRequireDefault(require(\"../../../hooks/useDataManager\"));\n\nfunction useSelect(name) {\n  var _useDataManager = (0, _useDataManager2[\"default\"])(),\n      addComponentToDynamicZone = _useDataManager.addComponentToDynamicZone,\n      createActionAllowedFields = _useDataManager.createActionAllowedFields,\n      isCreatingEntry = _useDataManager.isCreatingEntry,\n      formErrors = _useDataManager.formErrors,\n      modifiedData = _useDataManager.modifiedData,\n      moveComponentUp = _useDataManager.moveComponentUp,\n      moveComponentDown = _useDataManager.moveComponentDown,\n      removeComponentFromDynamicZone = _useDataManager.removeComponentFromDynamicZone,\n      readActionAllowedFields = _useDataManager.readActionAllowedFields,\n      updateActionAllowedFields = _useDataManager.updateActionAllowedFields;\n\n  var dynamicDisplayedComponents = (0, _react.useMemo)(function () {\n    return (0, _lodash.get)(modifiedData, [name], []).map(function (data) {\n      return data.__component;\n    });\n  }, [modifiedData, name]);\n  var isFieldAllowed = (0, _react.useMemo)(function () {\n    var allowedFields = isCreatingEntry ? createActionAllowedFields : updateActionAllowedFields;\n    return allowedFields.includes(name);\n  }, [name, isCreatingEntry, createActionAllowedFields, updateActionAllowedFields]);\n  var isFieldReadable = (0, _react.useMemo)(function () {\n    var allowedFields = isCreatingEntry ? [] : readActionAllowedFields;\n    return allowedFields.includes(name);\n  }, [name, isCreatingEntry, readActionAllowedFields]);\n  return {\n    addComponentToDynamicZone: addComponentToDynamicZone,\n    formErrors: formErrors,\n    isCreatingEntry: isCreatingEntry,\n    isFieldAllowed: isFieldAllowed,\n    isFieldReadable: isFieldReadable,\n    moveComponentUp: moveComponentUp,\n    moveComponentDown: moveComponentDown,\n    removeComponentFromDynamicZone: removeComponentFromDynamicZone,\n    dynamicDisplayedComponents: dynamicDisplayedComponents\n  };\n}\n\nvar _default = useSelect;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["D:/webstorm_projects/redcat_backend/.cache/plugins/strapi-plugin-content-manager/admin/src/components/DynamicZone/utils/select.js"],"names":["useSelect","name","addComponentToDynamicZone","createActionAllowedFields","isCreatingEntry","formErrors","modifiedData","moveComponentUp","moveComponentDown","removeComponentFromDynamicZone","readActionAllowedFields","updateActionAllowedFields","dynamicDisplayedComponents","map","data","__component","isFieldAllowed","allowedFields","includes","isFieldReadable"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;AAAA,wBAYnB,kCAZmB;AAAA,MAErBC,yBAFqB,mBAErBA,yBAFqB;AAAA,MAGrBC,yBAHqB,mBAGrBA,yBAHqB;AAAA,MAIrBC,eAJqB,mBAIrBA,eAJqB;AAAA,MAKrBC,UALqB,mBAKrBA,UALqB;AAAA,MAMrBC,YANqB,mBAMrBA,YANqB;AAAA,MAOrBC,eAPqB,mBAOrBA,eAPqB;AAAA,MAQrBC,iBARqB,mBAQrBA,iBARqB;AAAA,MASrBC,8BATqB,mBASrBA,8BATqB;AAAA,MAUrBC,uBAVqB,mBAUrBA,uBAVqB;AAAA,MAWrBC,yBAXqB,mBAWrBA,yBAXqB;;AAcvB,MAAMC,0BAA0B,GAAG,oBACjC;AAAA,WAAM,iBAAIN,YAAJ,EAAkB,CAACL,IAAD,CAAlB,EAA0B,EAA1B,EAA8BY,GAA9B,CAAkC,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACC,WAAT;AAAA,KAAtC,CAAN;AAAA,GADiC,EAEjC,CAACT,YAAD,EAAeL,IAAf,CAFiC,CAAnC;AAKA,MAAMe,cAAc,GAAG,oBAAQ,YAAM;AACnC,QAAMC,aAAa,GAAGb,eAAe,GAAGD,yBAAH,GAA+BQ,yBAApE;AAEA,WAAOM,aAAa,CAACC,QAAd,CAAuBjB,IAAvB,CAAP;AACD,GAJsB,EAIpB,CAACA,IAAD,EAAOG,eAAP,EAAwBD,yBAAxB,EAAmDQ,yBAAnD,CAJoB,CAAvB;AAMA,MAAMQ,eAAe,GAAG,oBAAQ,YAAM;AACpC,QAAMF,aAAa,GAAGb,eAAe,GAAG,EAAH,GAAQM,uBAA7C;AAEA,WAAOO,aAAa,CAACC,QAAd,CAAuBjB,IAAvB,CAAP;AACD,GAJuB,EAIrB,CAACA,IAAD,EAAOG,eAAP,EAAwBM,uBAAxB,CAJqB,CAAxB;AAMA,SAAO;AACLR,IAAAA,yBAAyB,EAAzBA,yBADK;AAELG,IAAAA,UAAU,EAAVA,UAFK;AAGLD,IAAAA,eAAe,EAAfA,eAHK;AAILY,IAAAA,cAAc,EAAdA,cAJK;AAKLG,IAAAA,eAAe,EAAfA,eALK;AAMLZ,IAAAA,eAAe,EAAfA,eANK;AAOLC,IAAAA,iBAAiB,EAAjBA,iBAPK;AAQLC,IAAAA,8BAA8B,EAA9BA,8BARK;AASLG,IAAAA,0BAA0B,EAA1BA;AATK,GAAP;AAWD;;eAEcZ,S","sourcesContent":["import { useMemo } from 'react';\nimport { get } from 'lodash';\nimport useDataManager from '../../../hooks/useDataManager';\n\nfunction useSelect(name) {\n  const {\n    addComponentToDynamicZone,\n    createActionAllowedFields,\n    isCreatingEntry,\n    formErrors,\n    modifiedData,\n    moveComponentUp,\n    moveComponentDown,\n    removeComponentFromDynamicZone,\n    readActionAllowedFields,\n    updateActionAllowedFields,\n  } = useDataManager();\n\n  const dynamicDisplayedComponents = useMemo(\n    () => get(modifiedData, [name], []).map(data => data.__component),\n    [modifiedData, name]\n  );\n\n  const isFieldAllowed = useMemo(() => {\n    const allowedFields = isCreatingEntry ? createActionAllowedFields : updateActionAllowedFields;\n\n    return allowedFields.includes(name);\n  }, [name, isCreatingEntry, createActionAllowedFields, updateActionAllowedFields]);\n\n  const isFieldReadable = useMemo(() => {\n    const allowedFields = isCreatingEntry ? [] : readActionAllowedFields;\n\n    return allowedFields.includes(name);\n  }, [name, isCreatingEntry, readActionAllowedFields]);\n\n  return {\n    addComponentToDynamicZone,\n    formErrors,\n    isCreatingEntry,\n    isFieldAllowed,\n    isFieldReadable,\n    moveComponentUp,\n    moveComponentDown,\n    removeComponentFromDynamicZone,\n    dynamicDisplayedComponents,\n  };\n}\n\nexport default useSelect;\n"]},"metadata":{},"sourceType":"script"}