{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactSelect = require(\"react-select\");\n\nvar _lodash = require(\"lodash\");\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _styles = require(\"@buffetjs/styles\");\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _SubUl = _interopRequireDefault(require(\"./SubUl\"));\n\nvar _Ul = _interopRequireDefault(require(\"./Ul\"));\n\nvar _UpperFirst = _interopRequireDefault(require(\"./UpperFirst\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nvar MenuList = function MenuList(_ref) {\n  var selectProps = _ref.selectProps,\n      rest = (0, _objectWithoutProperties2[\"default\"])(_ref, [\"selectProps\"]);\n  var Component = _reactSelect.components.MenuList;\n\n  var _useState = (0, _react.useState)({}),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      collapses = _useState2[0],\n      setCollapses = _useState2[1];\n\n  var optionsGroupByCategory = (0, _lodash.groupBy)(selectProps.options, 'category');\n\n  var toggleCollapse = function toggleCollapse(collapseName) {\n    setCollapses(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, (0, _defineProperty2[\"default\"])({}, collapseName, !collapses[collapseName]));\n    });\n  };\n\n  var hasAction = (0, _react.useCallback)(function (condition) {\n    return selectProps.value.includes(condition.id);\n  }, [selectProps.value]);\n  var hasSomeCategoryAction = (0, _react.useCallback)(function (category) {\n    var formattedCategories = category[1].map(function (condition) {\n      return condition.id;\n    });\n    var categoryActions = (0, _lodash.intersectionWith)(formattedCategories, selectProps.value).length;\n    return categoryActions > 0 && categoryActions < formattedCategories.length;\n  }, [selectProps.value]);\n  var hasAllCategoryAction = (0, _react.useCallback)(function (category) {\n    var formattedCategories = category[1].map(function (condition) {\n      return condition.id;\n    });\n    var categoryActions = (0, _lodash.intersectionWith)(formattedCategories, selectProps.value).length;\n    return categoryActions === formattedCategories.length;\n  }, [selectProps.value]);\n  return /*#__PURE__*/_react[\"default\"].createElement(Component, rest, /*#__PURE__*/_react[\"default\"].createElement(_Ul[\"default\"], {\n    disabled: true\n  }, Object.entries(optionsGroupByCategory).map(function (category, index) {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n      key: category[0]\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_core.Flex, {\n      justifyContent: \"space-between\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_styles.Label, {\n      htmlFor: \"overrideReactSelectBehavior\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(_core.Flex, null, /*#__PURE__*/_react[\"default\"].createElement(_core.Checkbox, {\n      disabled: true,\n      id: \"checkCategory\",\n      name: category[0],\n      onChange: function onChange() {},\n      value: hasAllCategoryAction(category),\n      someChecked: hasSomeCategoryAction(category)\n    }), /*#__PURE__*/_react[\"default\"].createElement(_UpperFirst[\"default\"], {\n      content: category[0]\n    }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      style: {\n        flex: 1,\n        textAlign: 'end',\n        cursor: 'pointer'\n      },\n      onClick: function onClick() {\n        return toggleCollapse(category[0]);\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(_reactFontawesome.FontAwesomeIcon, {\n      style: {\n        margin: 'auto',\n        fontSize: '11px',\n        color: '#919bae'\n      },\n      icon: collapses[category[0]] ? 'chevron-up' : 'chevron-down'\n    })))), /*#__PURE__*/_react[\"default\"].createElement(_SubUl[\"default\"], {\n      tag: \"ul\",\n      isOpen: collapses[category[0]]\n    }, category[1].map(function (action) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n        key: action.id\n      }, /*#__PURE__*/_react[\"default\"].createElement(_core.Flex, null, /*#__PURE__*/_react[\"default\"].createElement(_styles.Label, {\n        htmlFor: action.id,\n        message: action.displayName\n      }, /*#__PURE__*/_react[\"default\"].createElement(_core.Flex, null, /*#__PURE__*/_react[\"default\"].createElement(_core.Checkbox, {\n        id: \"check\",\n        name: action.id // Remove the handler\n        ,\n        onChange: function onChange() {},\n        value: hasAction(action)\n      }), action.displayName))));\n    })), index + 1 < Object.entries(optionsGroupByCategory).length && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      style: {\n        paddingTop: '17px'\n      }\n    }));\n  })));\n};\n\nMenuList.propTypes = {\n  selectProps: _propTypes[\"default\"].object.isRequired\n};\nvar _default = MenuList;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["D:/webstorm_projects/redcat_backend/.cache/admin/src/components/Roles/ConditionsSelect/MenuList/index.js"],"names":["MenuList","selectProps","rest","Component","components","collapses","setCollapses","optionsGroupByCategory","options","toggleCollapse","collapseName","prevState","hasAction","condition","value","includes","id","hasSomeCategoryAction","category","formattedCategories","map","categoryActions","length","hasAllCategoryAction","Object","entries","index","flex","textAlign","cursor","margin","fontSize","color","action","displayName","paddingTop","propTypes","PropTypes","object","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { components } from 'react-select';\nimport { groupBy, intersectionWith } from 'lodash';\nimport { Checkbox, Flex } from '@buffetjs/core';\nimport { Label } from '@buffetjs/styles';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport SubUl from './SubUl';\nimport Ul from './Ul';\nimport UpperFirst from './UpperFirst';\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n\nconst MenuList = ({ selectProps, ...rest }) => {\n  const Component = components.MenuList;\n  const [collapses, setCollapses] = useState({});\n  const optionsGroupByCategory = groupBy(selectProps.options, 'category');\n  const toggleCollapse = collapseName => {\n    setCollapses(prevState => ({ ...prevState, [collapseName]: !collapses[collapseName] }));\n  };\n\n  const hasAction = useCallback(\n    condition => {\n      return selectProps.value.includes(condition.id);\n    },\n    [selectProps.value]\n  );\n\n  const hasSomeCategoryAction = useCallback(\n    category => {\n      const formattedCategories = category[1].map(condition => condition.id);\n\n      const categoryActions = intersectionWith(formattedCategories, selectProps.value).length;\n\n      return categoryActions > 0 && categoryActions < formattedCategories.length;\n    },\n    [selectProps.value]\n  );\n\n  const hasAllCategoryAction = useCallback(\n    category => {\n      const formattedCategories = category[1].map(condition => condition.id);\n\n      const categoryActions = intersectionWith(formattedCategories, selectProps.value).length;\n\n      return categoryActions === formattedCategories.length;\n    },\n    [selectProps.value]\n  );\n\n  return (\n    <Component {...rest}>\n      <Ul disabled>\n        {Object.entries(optionsGroupByCategory).map((category, index) => {\n          return (\n            <li key={category[0]}>\n              <div>\n                <Flex justifyContent=\"space-between\">\n                  <Label htmlFor=\"overrideReactSelectBehavior\">\n                    <Flex>\n                      <Checkbox\n                        disabled\n                        id=\"checkCategory\"\n                        name={category[0]}\n                        onChange={() => {}}\n                        value={hasAllCategoryAction(category)}\n                        someChecked={hasSomeCategoryAction(category)}\n                      />\n                      <UpperFirst content={category[0]} />\n                    </Flex>\n                  </Label>\n                  <div\n                    style={{ flex: 1, textAlign: 'end', cursor: 'pointer' }}\n                    onClick={() => toggleCollapse(category[0])}\n                  >\n                    <FontAwesomeIcon\n                      style={{\n                        margin: 'auto',\n                        fontSize: '11px',\n                        color: '#919bae',\n                      }}\n                      icon={collapses[category[0]] ? 'chevron-up' : 'chevron-down'}\n                    />\n                  </div>\n                </Flex>\n              </div>\n              <SubUl tag=\"ul\" isOpen={collapses[category[0]]}>\n                {category[1].map(action => {\n                  return (\n                    <li key={action.id}>\n                      <Flex>\n                        <Label htmlFor={action.id} message={action.displayName}>\n                          <Flex>\n                            <Checkbox\n                              id=\"check\"\n                              name={action.id}\n                              // Remove the handler\n                              onChange={() => {}}\n                              value={hasAction(action)}\n                            />\n                            {action.displayName}\n                          </Flex>\n                        </Label>\n                      </Flex>\n                    </li>\n                  );\n                })}\n              </SubUl>\n              {index + 1 < Object.entries(optionsGroupByCategory).length && (\n                <div style={{ paddingTop: '17px' }} />\n              )}\n            </li>\n          );\n        })}\n      </Ul>\n    </Component>\n  );\n};\n\nMenuList.propTypes = {\n  selectProps: PropTypes.object.isRequired,\n};\nexport default MenuList;\n"]},"metadata":{},"sourceType":"script"}