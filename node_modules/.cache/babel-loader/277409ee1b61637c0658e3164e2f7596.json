{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initialState = exports[\"default\"] = void 0;\n\nvar _immer = _interopRequireDefault(require(\"immer\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _config = require(\"../../config\");\n\nvar _permissions = _interopRequireDefault(require(\"../../permissions\"));\n\n/* eslint-disable consistent-return */\nvar initialState = {\n  collectionTypesSectionLinks: [],\n  generalSectionLinks: [{\n    icon: 'list',\n    label: 'app.components.LeftMenuLinkContainer.listPlugins',\n    destination: '/list-plugins',\n    isDisplayed: false,\n    permissions: _permissions[\"default\"].marketplace.main,\n    notificationsCount: 0\n  }, {\n    icon: 'shopping-basket',\n    label: 'app.components.LeftMenuLinkContainer.installNewPlugin',\n    destination: '/marketplace',\n    isDisplayed: false,\n    permissions: _permissions[\"default\"].marketplace.main,\n    notificationsCount: 0\n  }, {\n    icon: 'cog',\n    label: 'app.components.LeftMenuLinkContainer.settings',\n    isDisplayed: false,\n    destination: _config.SETTINGS_BASE_URL,\n    // Permissions of this link are retrieved in the init phase\n    // using the settings menu\n    permissions: [],\n    notificationsCount: 0\n  }],\n  singleTypesSectionLinks: [],\n  pluginsSectionLinks: [],\n  isLoading: true\n};\nexports.initialState = initialState;\n\nvar reducer = function reducer(state, action) {\n  return (0, _immer[\"default\"])(state, function (draftState) {\n    switch (action.type) {\n      case 'GET_MODELS_SUCCEEDED':\n        {\n          Object.keys(action.data).forEach(function (modelType) {\n            (0, _lodash.set)(draftState, [modelType], action.data[modelType]);\n          });\n          break;\n        }\n\n      case 'SET_LINK_PERMISSIONS':\n        {\n          Object.keys(action.data).forEach(function (sectionName) {\n            var sectionData = action.data[sectionName];\n            sectionData.forEach(function (result) {\n              (0, _lodash.set)(draftState, [sectionName, result.index, 'isDisplayed'], result.hasPermission);\n            });\n          });\n          break;\n        }\n\n      case 'TOGGLE_IS_LOADING':\n        {\n          draftState.isLoading = false;\n          break;\n        }\n\n      default:\n        return draftState;\n    }\n  });\n};\n\nvar _default = reducer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["D:/webstorm_projects/redcat_backend/.cache/admin/src/containers/LeftMenu/reducer.js"],"names":["initialState","collectionTypesSectionLinks","generalSectionLinks","icon","label","destination","isDisplayed","permissions","adminPermissions","marketplace","main","notificationsCount","SETTINGS_BASE_URL","singleTypesSectionLinks","pluginsSectionLinks","isLoading","reducer","state","action","draftState","type","Object","keys","data","forEach","modelType","sectionName","sectionData","result","index","hasPermission"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;AACA;;AAJA;AAMA,IAAMA,YAAY,GAAG;AACnBC,EAAAA,2BAA2B,EAAE,EADV;AAEnBC,EAAAA,mBAAmB,EAAE,CACnB;AACEC,IAAAA,IAAI,EAAE,MADR;AAEEC,IAAAA,KAAK,EAAE,kDAFT;AAGEC,IAAAA,WAAW,EAAE,eAHf;AAIEC,IAAAA,WAAW,EAAE,KAJf;AAKEC,IAAAA,WAAW,EAAEC,wBAAiBC,WAAjB,CAA6BC,IAL5C;AAMEC,IAAAA,kBAAkB,EAAE;AANtB,GADmB,EASnB;AACER,IAAAA,IAAI,EAAE,iBADR;AAEEC,IAAAA,KAAK,EAAE,uDAFT;AAGEC,IAAAA,WAAW,EAAE,cAHf;AAIEC,IAAAA,WAAW,EAAE,KAJf;AAKEC,IAAAA,WAAW,EAAEC,wBAAiBC,WAAjB,CAA6BC,IAL5C;AAMEC,IAAAA,kBAAkB,EAAE;AANtB,GATmB,EAiBnB;AACER,IAAAA,IAAI,EAAE,KADR;AAEEC,IAAAA,KAAK,EAAE,+CAFT;AAGEE,IAAAA,WAAW,EAAE,KAHf;AAIED,IAAAA,WAAW,EAAEO,yBAJf;AAKE;AACA;AACAL,IAAAA,WAAW,EAAE,EAPf;AAQEI,IAAAA,kBAAkB,EAAE;AARtB,GAjBmB,CAFF;AA8BnBE,EAAAA,uBAAuB,EAAE,EA9BN;AA+BnBC,EAAAA,mBAAmB,EAAE,EA/BF;AAgCnBC,EAAAA,SAAS,EAAE;AAhCQ,CAArB;;;AAmCA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR;AAAA,SACd,uBAAQD,KAAR,EAAe,UAAAE,UAAU,EAAI;AAC3B,YAAQD,MAAM,CAACE,IAAf;AACE,WAAK,sBAAL;AAA6B;AAC3BC,UAAAA,MAAM,CAACC,IAAP,CAAYJ,MAAM,CAACK,IAAnB,EAAyBC,OAAzB,CAAiC,UAAAC,SAAS,EAAI;AAC5C,6BAAIN,UAAJ,EAAgB,CAACM,SAAD,CAAhB,EAA6BP,MAAM,CAACK,IAAP,CAAYE,SAAZ,CAA7B;AACD,WAFD;AAGA;AACD;;AACD,WAAK,sBAAL;AAA6B;AAC3BJ,UAAAA,MAAM,CAACC,IAAP,CAAYJ,MAAM,CAACK,IAAnB,EAAyBC,OAAzB,CAAiC,UAAAE,WAAW,EAAI;AAC9C,gBAAMC,WAAW,GAAGT,MAAM,CAACK,IAAP,CAAYG,WAAZ,CAApB;AAEAC,YAAAA,WAAW,CAACH,OAAZ,CAAoB,UAAAI,MAAM,EAAI;AAC5B,+BAAIT,UAAJ,EAAgB,CAACO,WAAD,EAAcE,MAAM,CAACC,KAArB,EAA4B,aAA5B,CAAhB,EAA4DD,MAAM,CAACE,aAAnE;AACD,aAFD;AAGD,WAND;AAOA;AACD;;AACD,WAAK,mBAAL;AAA0B;AACxBX,UAAAA,UAAU,CAACJ,SAAX,GAAuB,KAAvB;AACA;AACD;;AACD;AACE,eAAOI,UAAP;AAtBJ;AAwBD,GAzBD,CADc;AAAA,CAAhB;;eA4BeH,O","sourcesContent":["/* eslint-disable consistent-return */\nimport produce from 'immer';\nimport { set } from 'lodash';\nimport { SETTINGS_BASE_URL } from '../../config';\nimport adminPermissions from '../../permissions';\n\nconst initialState = {\n  collectionTypesSectionLinks: [],\n  generalSectionLinks: [\n    {\n      icon: 'list',\n      label: 'app.components.LeftMenuLinkContainer.listPlugins',\n      destination: '/list-plugins',\n      isDisplayed: false,\n      permissions: adminPermissions.marketplace.main,\n      notificationsCount: 0,\n    },\n    {\n      icon: 'shopping-basket',\n      label: 'app.components.LeftMenuLinkContainer.installNewPlugin',\n      destination: '/marketplace',\n      isDisplayed: false,\n      permissions: adminPermissions.marketplace.main,\n      notificationsCount: 0,\n    },\n    {\n      icon: 'cog',\n      label: 'app.components.LeftMenuLinkContainer.settings',\n      isDisplayed: false,\n      destination: SETTINGS_BASE_URL,\n      // Permissions of this link are retrieved in the init phase\n      // using the settings menu\n      permissions: [],\n      notificationsCount: 0,\n    },\n  ],\n  singleTypesSectionLinks: [],\n  pluginsSectionLinks: [],\n  isLoading: true,\n};\n\nconst reducer = (state, action) =>\n  produce(state, draftState => {\n    switch (action.type) {\n      case 'GET_MODELS_SUCCEEDED': {\n        Object.keys(action.data).forEach(modelType => {\n          set(draftState, [modelType], action.data[modelType]);\n        });\n        break;\n      }\n      case 'SET_LINK_PERMISSIONS': {\n        Object.keys(action.data).forEach(sectionName => {\n          const sectionData = action.data[sectionName];\n\n          sectionData.forEach(result => {\n            set(draftState, [sectionName, result.index, 'isDisplayed'], result.hasPermission);\n          });\n        });\n        break;\n      }\n      case 'TOGGLE_IS_LOADING': {\n        draftState.isLoading = false;\n        break;\n      }\n      default:\n        return draftState;\n    }\n  });\n\nexport default reducer;\nexport { initialState };\n"]},"metadata":{},"sourceType":"script"}