{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _lodash = require(\"lodash\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _utils = require(\"../../utils\");\n\nvar _icon_remove = _interopRequireDefault(require(\"../../assets/images/icon_remove.svg\"));\n\nvar _RelationDPState = _interopRequireDefault(require(\"../RelationDPState\"));\n\nvar _components = require(\"./components\");\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\nvar Relation = function Relation(_ref) {\n  var data = _ref.data,\n      displayNavigationLink = _ref.displayNavigationLink,\n      hasDraftAndPublish = _ref.hasDraftAndPublish,\n      isDisabled = _ref.isDisabled,\n      isDragging = _ref.isDragging,\n      mainField = _ref.mainField,\n      onRemove = _ref.onRemove,\n      to = _ref.to;\n\n  var _useIntl = (0, _reactIntl.useIntl)(),\n      formatMessage = _useIntl.formatMessage;\n\n  var cursor = (0, _react.useMemo)(function () {\n    if (isDisabled) {\n      return 'not-allowed';\n    }\n\n    if (!displayNavigationLink) {\n      return 'default';\n    }\n\n    return 'pointer';\n  }, [displayNavigationLink, isDisabled]);\n\n  var _useLocation = (0, _reactRouterDom.useLocation)(),\n      pathname = _useLocation.pathname;\n\n  var isDraft = (0, _lodash.isEmpty)(data.published_at);\n  var titleLabelID = isDraft ? 'components.Select.draft-info-title' : 'components.Select.publish-info-title';\n  var title = hasDraftAndPublish ? formatMessage({\n    id: (0, _utils.getTrad)(titleLabelID)\n  }) : formatMessage({\n    id: (0, _utils.getTrad)('containers.Edit.clickToJump')\n  });\n  var value = data[mainField.name];\n  var formattedValue = (0, _utils.getDisplayedValue)(mainField.schema.type, value, mainField.name);\n\n  if (isDragging || !displayNavigationLink) {\n    title = '';\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      cursor: cursor\n    },\n    title: title\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"dragHandle\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null)), hasDraftAndPublish && /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_RelationDPState[\"default\"], {\n    isDraft: isDraft\n  })), displayNavigationLink ? /*#__PURE__*/_react[\"default\"].createElement(_reactRouterDom.Link, {\n    to: {\n      pathname: to,\n      state: {\n        from: pathname\n      }\n    },\n    title: title\n  }, /*#__PURE__*/_react[\"default\"].createElement(_components.Span, null, formattedValue, \"\\xA0\")) : /*#__PURE__*/_react[\"default\"].createElement(_components.Span, null, formattedValue, \"\\xA0\")), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      cursor: cursor\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n    src: _icon_remove[\"default\"],\n    alt: \"Remove Icon\",\n    onClick: onRemove\n  })));\n};\n\nRelation.defaultProps = {\n  isDragging: false,\n  onRemove: function onRemove() {},\n  to: ''\n};\nRelation.propTypes = {\n  data: _propTypes[\"default\"].object.isRequired,\n  displayNavigationLink: _propTypes[\"default\"].bool.isRequired,\n  hasDraftAndPublish: _propTypes[\"default\"].bool.isRequired,\n  isDisabled: _propTypes[\"default\"].bool.isRequired,\n  isDragging: _propTypes[\"default\"].bool,\n  mainField: _propTypes[\"default\"].shape({\n    name: _propTypes[\"default\"].string.isRequired,\n    schema: _propTypes[\"default\"].shape({\n      type: _propTypes[\"default\"].string.isRequired\n    }).isRequired\n  }).isRequired,\n  onRemove: _propTypes[\"default\"].func,\n  to: _propTypes[\"default\"].string\n};\n\nvar _default = /*#__PURE__*/(0, _react.memo)(Relation);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["D:/webstorm_projects/redcat_backend/.cache/plugins/strapi-plugin-content-manager/admin/src/components/SelectMany/Relation.js"],"names":["Relation","data","displayNavigationLink","hasDraftAndPublish","isDisabled","isDragging","mainField","onRemove","to","formatMessage","cursor","pathname","isDraft","published_at","titleLabelID","title","id","value","name","formattedValue","schema","type","state","from","IconRemove","defaultProps","propTypes","PropTypes","object","isRequired","bool","shape","string","func"],"mappings":";;;;;;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AATA;;AAWA;AAEA,IAAMA,QAAQ,GAAG,SAAXA,QAAW,OASX;AAAA,MARJC,IAQI,QARJA,IAQI;AAAA,MAPJC,qBAOI,QAPJA,qBAOI;AAAA,MANJC,kBAMI,QANJA,kBAMI;AAAA,MALJC,UAKI,QALJA,UAKI;AAAA,MAJJC,UAII,QAJJA,UAII;AAAA,MAHJC,SAGI,QAHJA,SAGI;AAAA,MAFJC,QAEI,QAFJA,QAEI;AAAA,MADJC,EACI,QADJA,EACI;;AAAA,iBACsB,yBADtB;AAAA,MACIC,aADJ,YACIA,aADJ;;AAEJ,MAAMC,MAAM,GAAG,oBAAQ,YAAM;AAC3B,QAAIN,UAAJ,EAAgB;AACd,aAAO,aAAP;AACD;;AAED,QAAI,CAACF,qBAAL,EAA4B;AAC1B,aAAO,SAAP;AACD;;AAED,WAAO,SAAP;AACD,GAVc,EAUZ,CAACA,qBAAD,EAAwBE,UAAxB,CAVY,CAAf;;AAFI,qBAaiB,kCAbjB;AAAA,MAaIO,QAbJ,gBAaIA,QAbJ;;AAcJ,MAAMC,OAAO,GAAG,qBAAQX,IAAI,CAACY,YAAb,CAAhB;AACA,MAAMC,YAAY,GAAGF,OAAO,GACxB,oCADwB,GAExB,sCAFJ;AAGA,MAAIG,KAAK,GAAGZ,kBAAkB,GAC1BM,aAAa,CAAC;AAAEO,IAAAA,EAAE,EAAE,oBAAQF,YAAR;AAAN,GAAD,CADa,GAE1BL,aAAa,CAAC;AAAEO,IAAAA,EAAE,EAAE,oBAAQ,6BAAR;AAAN,GAAD,CAFjB;AAIA,MAAMC,KAAK,GAAGhB,IAAI,CAACK,SAAS,CAACY,IAAX,CAAlB;AACA,MAAMC,cAAc,GAAG,8BAAkBb,SAAS,CAACc,MAAV,CAAiBC,IAAnC,EAAyCJ,KAAzC,EAAgDX,SAAS,CAACY,IAA1D,CAAvB;;AAEA,MAAIb,UAAU,IAAI,CAACH,qBAAnB,EAA0C;AACxCa,IAAAA,KAAK,GAAG,EAAR;AACD;;AAED,sBACE,+EACE;AAAK,IAAA,KAAK,EAAE;AAAEL,MAAAA,MAAM,EAANA;AAAF,KAAZ;AAAwB,IAAA,KAAK,EAAEK;AAA/B,kBACE;AAAK,IAAA,SAAS,EAAC;AAAf,kBACE,6CADF,CADF,EAIGZ,kBAAkB,iBACjB,0DACE,gCAAC,2BAAD;AAAiB,IAAA,OAAO,EAAES;AAA1B,IADF,CALJ,EASGV,qBAAqB,gBACpB,gCAAC,oBAAD;AAAM,IAAA,EAAE,EAAE;AAAES,MAAAA,QAAQ,EAAEH,EAAZ;AAAgBc,MAAAA,KAAK,EAAE;AAAEC,QAAAA,IAAI,EAAEZ;AAAR;AAAvB,KAAV;AAAuD,IAAA,KAAK,EAAEI;AAA9D,kBACE,gCAAC,gBAAD,QAAOI,cAAP,SADF,CADoB,gBAKpB,gCAAC,gBAAD,QAAOA,cAAP,SAdJ,CADF,eAkBE;AAAK,IAAA,KAAK,EAAE;AAAET,MAAAA,MAAM,EAANA;AAAF;AAAZ,kBACE;AAAK,IAAA,GAAG,EAAEc,uBAAV;AAAsB,IAAA,GAAG,EAAC,aAA1B;AAAwC,IAAA,OAAO,EAAEjB;AAAjD,IADF,CAlBF,CADF;AAwBD,CA9DD;;AAgEAP,QAAQ,CAACyB,YAAT,GAAwB;AACtBpB,EAAAA,UAAU,EAAE,KADU;AAEtBE,EAAAA,QAAQ,EAAE,oBAAM,CAAE,CAFI;AAGtBC,EAAAA,EAAE,EAAE;AAHkB,CAAxB;AAMAR,QAAQ,CAAC0B,SAAT,GAAqB;AACnBzB,EAAAA,IAAI,EAAE0B,sBAAUC,MAAV,CAAiBC,UADJ;AAEnB3B,EAAAA,qBAAqB,EAAEyB,sBAAUG,IAAV,CAAeD,UAFnB;AAGnB1B,EAAAA,kBAAkB,EAAEwB,sBAAUG,IAAV,CAAeD,UAHhB;AAInBzB,EAAAA,UAAU,EAAEuB,sBAAUG,IAAV,CAAeD,UAJR;AAKnBxB,EAAAA,UAAU,EAAEsB,sBAAUG,IALH;AAMnBxB,EAAAA,SAAS,EAAEqB,sBAAUI,KAAV,CAAgB;AACzBb,IAAAA,IAAI,EAAES,sBAAUK,MAAV,CAAiBH,UADE;AAEzBT,IAAAA,MAAM,EAAEO,sBAAUI,KAAV,CAAgB;AACtBV,MAAAA,IAAI,EAAEM,sBAAUK,MAAV,CAAiBH;AADD,KAAhB,EAELA;AAJsB,GAAhB,EAKRA,UAXgB;AAYnBtB,EAAAA,QAAQ,EAAEoB,sBAAUM,IAZD;AAanBzB,EAAAA,EAAE,EAAEmB,sBAAUK;AAbK,CAArB;;4BAgBe,iBAAKhC,QAAL,C","sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { memo, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, useLocation } from 'react-router-dom';\nimport { isEmpty } from 'lodash';\nimport { useIntl } from 'react-intl';\nimport { getDisplayedValue, getTrad } from '../../utils';\nimport IconRemove from '../../assets/images/icon_remove.svg';\nimport RelationDPState from '../RelationDPState';\nimport { Span } from './components';\n\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n\nconst Relation = ({\n  data,\n  displayNavigationLink,\n  hasDraftAndPublish,\n  isDisabled,\n  isDragging,\n  mainField,\n  onRemove,\n  to,\n}) => {\n  const { formatMessage } = useIntl();\n  const cursor = useMemo(() => {\n    if (isDisabled) {\n      return 'not-allowed';\n    }\n\n    if (!displayNavigationLink) {\n      return 'default';\n    }\n\n    return 'pointer';\n  }, [displayNavigationLink, isDisabled]);\n  const { pathname } = useLocation();\n  const isDraft = isEmpty(data.published_at);\n  const titleLabelID = isDraft\n    ? 'components.Select.draft-info-title'\n    : 'components.Select.publish-info-title';\n  let title = hasDraftAndPublish\n    ? formatMessage({ id: getTrad(titleLabelID) })\n    : formatMessage({ id: getTrad('containers.Edit.clickToJump') });\n\n  const value = data[mainField.name];\n  const formattedValue = getDisplayedValue(mainField.schema.type, value, mainField.name);\n\n  if (isDragging || !displayNavigationLink) {\n    title = '';\n  }\n\n  return (\n    <>\n      <div style={{ cursor }} title={title}>\n        <div className=\"dragHandle\">\n          <span />\n        </div>\n        {hasDraftAndPublish && (\n          <div>\n            <RelationDPState isDraft={isDraft} />\n          </div>\n        )}\n        {displayNavigationLink ? (\n          <Link to={{ pathname: to, state: { from: pathname } }} title={title}>\n            <Span>{formattedValue}&nbsp;</Span>\n          </Link>\n        ) : (\n          <Span>{formattedValue}&nbsp;</Span>\n        )}\n      </div>\n      <div style={{ cursor }}>\n        <img src={IconRemove} alt=\"Remove Icon\" onClick={onRemove} />\n      </div>\n    </>\n  );\n};\n\nRelation.defaultProps = {\n  isDragging: false,\n  onRemove: () => {},\n  to: '',\n};\n\nRelation.propTypes = {\n  data: PropTypes.object.isRequired,\n  displayNavigationLink: PropTypes.bool.isRequired,\n  hasDraftAndPublish: PropTypes.bool.isRequired,\n  isDisabled: PropTypes.bool.isRequired,\n  isDragging: PropTypes.bool,\n  mainField: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    schema: PropTypes.shape({\n      type: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  onRemove: PropTypes.func,\n  to: PropTypes.string,\n};\n\nexport default memo(Relation);\n"]},"metadata":{},"sourceType":"script"}