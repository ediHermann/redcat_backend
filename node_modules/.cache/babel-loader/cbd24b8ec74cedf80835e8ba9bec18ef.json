{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _config = require(\"../../config\");\n\nvar _utils = require(\"../../utils\");\n\nvar _utils2 = require(\"./utils\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar init = function init(initialState) {\n  var plugins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var settingsMenu = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var settingsLinkNotificationCount = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var settingsLinkPermissions = (0, _utils2.getSettingsMenuLinksPermissions)(settingsMenu);\n  var pluginsLinks = Object.values(plugins).reduce(function (acc, current) {\n    var pluginsSectionLinks = (0, _lodash.get)(current, 'menu.pluginsSectionLinks', []);\n    return [].concat((0, _toConsumableArray2[\"default\"])(acc), (0, _toConsumableArray2[\"default\"])(pluginsSectionLinks));\n  }, []);\n  var sortedLinks = (0, _utils.sortLinks)(pluginsLinks).map(function (link) {\n    return _objectSpread(_objectSpread({}, (0, _lodash.omit)(link, 'name')), {}, {\n      isDisplayed: false\n    });\n  });\n  var settingsLinkIndex = initialState.generalSectionLinks.findIndex(function (obj) {\n    return obj.destination === _config.SETTINGS_BASE_URL;\n  });\n\n  if (!settingsLinkPermissions.filter(function (perm) {\n    return perm === null;\n  }).length && settingsLinkIndex !== -1) {\n    var permissionsPath = ['generalSectionLinks', settingsLinkIndex, 'permissions'];\n    var notificationPath = ['generalSectionLinks', settingsLinkIndex, 'notificationsCount'];\n    (0, _lodash.set)(initialState, permissionsPath, settingsLinkPermissions);\n    (0, _lodash.set)(initialState, notificationPath, settingsLinkNotificationCount);\n  }\n\n  if (sortedLinks.length) {\n    (0, _lodash.set)(initialState, 'pluginsSectionLinks', sortedLinks);\n  }\n\n  return initialState;\n};\n\nvar _default = init;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["D:/webstorm_projects/redcat_backend/.cache/admin/src/containers/LeftMenu/init.js"],"names":["init","initialState","plugins","settingsMenu","settingsLinkNotificationCount","settingsLinkPermissions","pluginsLinks","Object","values","reduce","acc","current","pluginsSectionLinks","sortedLinks","map","link","isDisplayed","settingsLinkIndex","generalSectionLinks","findIndex","obj","destination","SETTINGS_BASE_URL","filter","perm","length","permissionsPath","notificationPath"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,IAAI,GAAG,SAAPA,IAAO,CAACC,YAAD,EAAsF;AAAA,MAAvEC,OAAuE,uEAA7D,EAA6D;AAAA,MAAzDC,YAAyD,uEAA1C,EAA0C;AAAA,MAAtCC,6BAAsC,uEAAN,CAAM;AACjG,MAAMC,uBAAuB,GAAG,6CAAgCF,YAAhC,CAAhC;AAEA,MAAMG,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcN,OAAd,EAAuBO,MAAvB,CAA8B,UAACC,GAAD,EAAMC,OAAN,EAAkB;AACnE,QAAMC,mBAAmB,GAAG,iBAAID,OAAJ,EAAa,0BAAb,EAAyC,EAAzC,CAA5B;AAEA,yDAAWD,GAAX,uCAAmBE,mBAAnB;AACD,GAJoB,EAIlB,EAJkB,CAArB;AAKA,MAAMC,WAAW,GAAG,sBAAUP,YAAV,EAAwBQ,GAAxB,CAA4B,UAAAC,IAAI,EAAI;AACtD,2CAAY,kBAAKA,IAAL,EAAW,MAAX,CAAZ;AAAgCC,MAAAA,WAAW,EAAE;AAA7C;AACD,GAFmB,CAApB;AAIA,MAAMC,iBAAiB,GAAGhB,YAAY,CAACiB,mBAAb,CAAiCC,SAAjC,CACxB,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,WAAJ,KAAoBC,yBAAxB;AAAA,GADqB,CAA1B;;AAIA,MAAI,CAACjB,uBAAuB,CAACkB,MAAxB,CAA+B,UAAAC,IAAI;AAAA,WAAIA,IAAI,KAAK,IAAb;AAAA,GAAnC,EAAsDC,MAAvD,IAAiER,iBAAiB,KAAK,CAAC,CAA5F,EAA+F;AAC7F,QAAMS,eAAe,GAAG,CAAC,qBAAD,EAAwBT,iBAAxB,EAA2C,aAA3C,CAAxB;AACA,QAAMU,gBAAgB,GAAG,CAAC,qBAAD,EAAwBV,iBAAxB,EAA2C,oBAA3C,CAAzB;AAEA,qBAAIhB,YAAJ,EAAkByB,eAAlB,EAAmCrB,uBAAnC;AACA,qBAAIJ,YAAJ,EAAkB0B,gBAAlB,EAAoCvB,6BAApC;AACD;;AAED,MAAIS,WAAW,CAACY,MAAhB,EAAwB;AACtB,qBAAIxB,YAAJ,EAAkB,qBAAlB,EAAyCY,WAAzC;AACD;;AAED,SAAOZ,YAAP;AACD,CA7BD;;eA+BeD,I","sourcesContent":["import { get, omit, set } from 'lodash';\nimport { SETTINGS_BASE_URL } from '../../config';\nimport { sortLinks } from '../../utils';\nimport { getSettingsMenuLinksPermissions } from './utils';\n\nconst init = (initialState, plugins = {}, settingsMenu = [], settingsLinkNotificationCount = 0) => {\n  const settingsLinkPermissions = getSettingsMenuLinksPermissions(settingsMenu);\n\n  const pluginsLinks = Object.values(plugins).reduce((acc, current) => {\n    const pluginsSectionLinks = get(current, 'menu.pluginsSectionLinks', []);\n\n    return [...acc, ...pluginsSectionLinks];\n  }, []);\n  const sortedLinks = sortLinks(pluginsLinks).map(link => {\n    return { ...omit(link, 'name'), isDisplayed: false };\n  });\n\n  const settingsLinkIndex = initialState.generalSectionLinks.findIndex(\n    obj => obj.destination === SETTINGS_BASE_URL\n  );\n\n  if (!settingsLinkPermissions.filter(perm => perm === null).length && settingsLinkIndex !== -1) {\n    const permissionsPath = ['generalSectionLinks', settingsLinkIndex, 'permissions'];\n    const notificationPath = ['generalSectionLinks', settingsLinkIndex, 'notificationsCount'];\n\n    set(initialState, permissionsPath, settingsLinkPermissions);\n    set(initialState, notificationPath, settingsLinkNotificationCount);\n  }\n\n  if (sortedLinks.length) {\n    set(initialState, 'pluginsSectionLinks', sortedLinks);\n  }\n\n  return initialState;\n};\n\nexport default init;\n"]},"metadata":{},"sourceType":"script"}