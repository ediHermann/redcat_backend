{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _lodash = require(\"lodash\");\n\nvar _ContainerFluid = _interopRequireDefault(require(\"../../components/ContainerFluid\"));\n\nvar _FormBloc = _interopRequireDefault(require(\"../../components/FormBloc\"));\n\nvar _SizedInput = _interopRequireDefault(require(\"../../components/SizedInput\"));\n\nvar _Settings = require(\"../../components/Settings\");\n\nvar _hooks = require(\"../../hooks\");\n\nvar _utils = require(\"./utils\");\n\nvar ProfilePage = function ProfilePage() {\n  var _useHistory = (0, _reactRouterDom.useHistory)(),\n      goBack = _useHistory.goBack;\n\n  var onSubmitSuccessCb = function onSubmitSuccessCb(data) {\n    return _strapiHelperPlugin.auth.setUserInfo(data);\n  };\n\n  var _useSettingsForm = (0, _hooks.useSettingsForm)('/admin/users/me', _utils.schema, onSubmitSuccessCb, ['email', 'firstname', 'lastname', 'username']),\n      _useSettingsForm2 = (0, _slicedToArray2[\"default\"])(_useSettingsForm, 3),\n      _useSettingsForm2$ = _useSettingsForm2[0],\n      formErrors = _useSettingsForm2$.formErrors,\n      initialData = _useSettingsForm2$.initialData,\n      isLoading = _useSettingsForm2$.isLoading,\n      modifiedData = _useSettingsForm2$.modifiedData,\n      showHeaderLoader = _useSettingsForm2$.showHeaderLoader,\n      showHeaderButtonLoader = _useSettingsForm2$.showHeaderButtonLoader,\n      // eslint-disable-next-line no-unused-vars\n  dispatch = _useSettingsForm2[1],\n      _useSettingsForm2$2 = _useSettingsForm2[2],\n      handleCancel = _useSettingsForm2$2.handleCancel,\n      handleChange = _useSettingsForm2$2.handleChange,\n      handleSubmit = _useSettingsForm2$2.handleSubmit;\n\n  var headerLabel = (0, _react.useMemo)(function () {\n    var userInfos = _strapiHelperPlugin.auth.getUserInfo();\n\n    if (modifiedData) {\n      return modifiedData.username || \"\".concat(modifiedData.firstname, \" \").concat(modifiedData.lastname);\n    }\n\n    return userInfos.username || \"\".concat(userInfos.firstname, \" \").concat(userInfos.lastname);\n  }, [modifiedData]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.BackHeader, {\n    onClick: goBack\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"form\", {\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/_react[\"default\"].createElement(_ContainerFluid[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_Settings.Header, {\n    isLoading: showHeaderLoader,\n    initialData: initialData,\n    label: headerLabel,\n    modifiedData: modifiedData,\n    onCancel: handleCancel,\n    showHeaderButtonLoader: showHeaderButtonLoader\n  }), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.BaselineAlignment, {\n    top: true,\n    size: \"3px\"\n  }), /*#__PURE__*/_react[\"default\"].createElement(_FormBloc[\"default\"], {\n    isLoading: isLoading\n  }, Object.keys(_utils.form).map(function (key) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_SizedInput[\"default\"], (0, _extends2[\"default\"])({}, _utils.form[key], {\n      key: key,\n      error: formErrors[key],\n      name: key,\n      onChange: handleChange,\n      value: (0, _lodash.get)(modifiedData, key, '')\n    }));\n  })))));\n};\n\nvar _default = ProfilePage;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["D:/webstorm_projects/redcat_backend/.cache/admin/src/containers/ProfilePage/index.js"],"names":["ProfilePage","goBack","onSubmitSuccessCb","data","auth","setUserInfo","schema","formErrors","initialData","isLoading","modifiedData","showHeaderLoader","showHeaderButtonLoader","dispatch","handleCancel","handleChange","handleSubmit","headerLabel","userInfos","getUserInfo","username","firstname","lastname","Object","keys","form","map","key"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA,oBACL,iCADK;AAAA,MAChBC,MADgB,eAChBA,MADgB;;AAExB,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,IAAI;AAAA,WAAIC,yBAAKC,WAAL,CAAiBF,IAAjB,CAAJ;AAAA,GAA9B;;AAFwB,yBASpB,4BAAgB,iBAAhB,EAAmCG,aAAnC,EAA2CJ,iBAA3C,EAA8D,CAChE,OADgE,EAEhE,WAFgE,EAGhE,UAHgE,EAIhE,UAJgE,CAA9D,CAToB;AAAA;AAAA;AAAA,MAKpBK,UALoB,sBAKpBA,UALoB;AAAA,MAKRC,WALQ,sBAKRA,WALQ;AAAA,MAKKC,SALL,sBAKKA,SALL;AAAA,MAKgBC,YALhB,sBAKgBA,YALhB;AAAA,MAK8BC,gBAL9B,sBAK8BA,gBAL9B;AAAA,MAKgDC,sBALhD,sBAKgDA,sBALhD;AAAA,MAMtB;AACAC,EAAAA,QAPsB;AAAA;AAAA,MAQpBC,YARoB,uBAQpBA,YARoB;AAAA,MAQNC,YARM,uBAQNA,YARM;AAAA,MAQQC,YARR,uBAQQA,YARR;;AAgBxB,MAAMC,WAAW,GAAG,oBAAQ,YAAM;AAChC,QAAMC,SAAS,GAAGd,yBAAKe,WAAL,EAAlB;;AAEA,QAAIT,YAAJ,EAAkB;AAChB,aAAOA,YAAY,CAACU,QAAb,cAA4BV,YAAY,CAACW,SAAzC,cAAsDX,YAAY,CAACY,QAAnE,CAAP;AACD;;AAED,WAAOJ,SAAS,CAACE,QAAV,cAAyBF,SAAS,CAACG,SAAnC,cAAgDH,SAAS,CAACI,QAA1D,CAAP;AACD,GARmB,EAQjB,CAACZ,YAAD,CARiB,CAApB;AAUA,sBACE,+EACE,gCAAC,8BAAD;AAAY,IAAA,OAAO,EAAET;AAArB,IADF,eAEE;AAAM,IAAA,QAAQ,EAAEe;AAAhB,kBACE,gCAAC,0BAAD,qBACE,gCAAC,gBAAD;AACE,IAAA,SAAS,EAAEL,gBADb;AAEE,IAAA,WAAW,EAAEH,WAFf;AAGE,IAAA,KAAK,EAAES,WAHT;AAIE,IAAA,YAAY,EAAEP,YAJhB;AAKE,IAAA,QAAQ,EAAEI,YALZ;AAME,IAAA,sBAAsB,EAAEF;AAN1B,IADF,eASE,gCAAC,qCAAD;AAAmB,IAAA,GAAG,MAAtB;AAAuB,IAAA,IAAI,EAAC;AAA5B,IATF,eAUE,gCAAC,oBAAD;AAAU,IAAA,SAAS,EAAEH;AAArB,KACGc,MAAM,CAACC,IAAP,CAAYC,WAAZ,EAAkBC,GAAlB,CAAsB,UAAAC,GAAG,EAAI;AAC5B,wBACE,gCAAC,sBAAD,gCACMF,YAAKE,GAAL,CADN;AAEE,MAAA,GAAG,EAAEA,GAFP;AAGE,MAAA,KAAK,EAAEpB,UAAU,CAACoB,GAAD,CAHnB;AAIE,MAAA,IAAI,EAAEA,GAJR;AAKE,MAAA,QAAQ,EAAEZ,YALZ;AAME,MAAA,KAAK,EAAE,iBAAIL,YAAJ,EAAkBiB,GAAlB,EAAuB,EAAvB;AANT,OADF;AAUD,GAXA,CADH,CAVF,CADF,CAFF,CADF;AAgCD,CA1DD;;eA4De3B,W","sourcesContent":["import React, { useMemo } from 'react';\nimport { BackHeader, BaselineAlignment, auth } from 'strapi-helper-plugin';\nimport { useHistory } from 'react-router-dom';\nimport { get } from 'lodash';\nimport ContainerFluid from '../../components/ContainerFluid';\nimport FormBloc from '../../components/FormBloc';\nimport SizedInput from '../../components/SizedInput';\nimport { Header } from '../../components/Settings';\nimport { useSettingsForm } from '../../hooks';\nimport { form, schema } from './utils';\n\nconst ProfilePage = () => {\n  const { goBack } = useHistory();\n  const onSubmitSuccessCb = data => auth.setUserInfo(data);\n\n  const [\n    { formErrors, initialData, isLoading, modifiedData, showHeaderLoader, showHeaderButtonLoader },\n    // eslint-disable-next-line no-unused-vars\n    dispatch,\n    { handleCancel, handleChange, handleSubmit },\n  ] = useSettingsForm('/admin/users/me', schema, onSubmitSuccessCb, [\n    'email',\n    'firstname',\n    'lastname',\n    'username',\n  ]);\n\n  const headerLabel = useMemo(() => {\n    const userInfos = auth.getUserInfo();\n\n    if (modifiedData) {\n      return modifiedData.username || `${modifiedData.firstname} ${modifiedData.lastname}`;\n    }\n\n    return userInfos.username || `${userInfos.firstname} ${userInfos.lastname}`;\n  }, [modifiedData]);\n\n  return (\n    <>\n      <BackHeader onClick={goBack} />\n      <form onSubmit={handleSubmit}>\n        <ContainerFluid>\n          <Header\n            isLoading={showHeaderLoader}\n            initialData={initialData}\n            label={headerLabel}\n            modifiedData={modifiedData}\n            onCancel={handleCancel}\n            showHeaderButtonLoader={showHeaderButtonLoader}\n          />\n          <BaselineAlignment top size=\"3px\" />\n          <FormBloc isLoading={isLoading}>\n            {Object.keys(form).map(key => {\n              return (\n                <SizedInput\n                  {...form[key]}\n                  key={key}\n                  error={formErrors[key]}\n                  name={key}\n                  onChange={handleChange}\n                  value={get(modifiedData, key, '')}\n                />\n              );\n            })}\n          </FormBloc>\n        </ContainerFluid>\n      </form>\n    </>\n  );\n};\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"script"}