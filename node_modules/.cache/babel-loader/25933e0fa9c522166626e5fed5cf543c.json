{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = require(\"react\");\n\nvar _hooks = require(\"../../../../hooks\");\n\nvar _utils = require(\"../utils\");\n\nvar useFillRequiredPermissions = function useFillRequiredPermissions(contentType) {\n  var _usePermissionsContex = (0, _hooks.usePermissionsContext)(),\n      contentTypesPermissions = _usePermissionsContex.contentTypesPermissions,\n      components = _usePermissionsContex.components,\n      dispatch = _usePermissionsContex.dispatch;\n\n  var onSelectMultipleAttributesRef = (0, _react.useRef)(dispatch);\n  var fillRequiredPermissions = (0, _react.useCallback)(function () {\n    var attributes = (0, _utils.getAttributesByModel)(contentType, components, '');\n    var existingCreatePermissionsSize = (0, _utils.getCreateActionsSizeByContentType)(contentType.uid, contentTypesPermissions);\n\n    if (existingCreatePermissionsSize === 0 && attributes.length > 0) {\n      var requiredAttributes = attributes.filter(function (attribute) {\n        return attribute.required;\n      });\n      onSelectMultipleAttributesRef.current({\n        type: 'SELECT_MULTIPLE_ATTRIBUTE',\n        subject: contentType.uid,\n        attributes: requiredAttributes\n      });\n    }\n  }, [components, contentType, contentTypesPermissions]);\n  return fillRequiredPermissions;\n};\n\nvar _default = useFillRequiredPermissions;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["D:/webstorm_projects/redcat_backend/.cache/admin/src/components/Roles/Permissions/ContentTypes/useFillRequiredPermissions.js"],"names":["useFillRequiredPermissions","contentType","contentTypesPermissions","components","dispatch","onSelectMultipleAttributesRef","fillRequiredPermissions","attributes","existingCreatePermissionsSize","uid","length","requiredAttributes","filter","attribute","required","current","type","subject"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AAEA,IAAMA,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAAC,WAAW,EAAI;AAAA,8BACU,mCADV;AAAA,MACxCC,uBADwC,yBACxCA,uBADwC;AAAA,MACfC,UADe,yBACfA,UADe;AAAA,MACHC,QADG,yBACHA,QADG;;AAEhD,MAAMC,6BAA6B,GAAG,mBAAOD,QAAP,CAAtC;AAEA,MAAME,uBAAuB,GAAG,wBAAY,YAAM;AAChD,QAAMC,UAAU,GAAG,iCAAqBN,WAArB,EAAkCE,UAAlC,EAA8C,EAA9C,CAAnB;AACA,QAAMK,6BAA6B,GAAG,8CACpCP,WAAW,CAACQ,GADwB,EAEpCP,uBAFoC,CAAtC;;AAKA,QAAIM,6BAA6B,KAAK,CAAlC,IAAuCD,UAAU,CAACG,MAAX,GAAoB,CAA/D,EAAkE;AAChE,UAAMC,kBAAkB,GAAGJ,UAAU,CAACK,MAAX,CAAkB,UAAAC,SAAS;AAAA,eAAIA,SAAS,CAACC,QAAd;AAAA,OAA3B,CAA3B;AAEAT,MAAAA,6BAA6B,CAACU,OAA9B,CAAsC;AACpCC,QAAAA,IAAI,EAAE,2BAD8B;AAEpCC,QAAAA,OAAO,EAAEhB,WAAW,CAACQ,GAFe;AAGpCF,QAAAA,UAAU,EAAEI;AAHwB,OAAtC;AAKD;AACF,GAhB+B,EAgB7B,CAACR,UAAD,EAAaF,WAAb,EAA0BC,uBAA1B,CAhB6B,CAAhC;AAkBA,SAAOI,uBAAP;AACD,CAvBD;;eAyBeN,0B","sourcesContent":["import { useCallback, useRef } from 'react';\n\nimport { usePermissionsContext } from '../../../../hooks';\nimport { getCreateActionsSizeByContentType, getAttributesByModel } from '../utils';\n\nconst useFillRequiredPermissions = contentType => {\n  const { contentTypesPermissions, components, dispatch } = usePermissionsContext();\n  const onSelectMultipleAttributesRef = useRef(dispatch);\n\n  const fillRequiredPermissions = useCallback(() => {\n    const attributes = getAttributesByModel(contentType, components, '');\n    const existingCreatePermissionsSize = getCreateActionsSizeByContentType(\n      contentType.uid,\n      contentTypesPermissions\n    );\n\n    if (existingCreatePermissionsSize === 0 && attributes.length > 0) {\n      const requiredAttributes = attributes.filter(attribute => attribute.required);\n\n      onSelectMultipleAttributesRef.current({\n        type: 'SELECT_MULTIPLE_ATTRIBUTE',\n        subject: contentType.uid,\n        attributes: requiredAttributes,\n      });\n    }\n  }, [components, contentType, contentTypesPermissions]);\n\n  return fillRequiredPermissions;\n};\n\nexport default useFillRequiredPermissions;\n"]},"metadata":{},"sourceType":"script"}